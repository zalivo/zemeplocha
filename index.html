<!DOCTYPE html> 
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <title>ƒåten√°≈ô Zemƒõplochy</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f3f3f3;
      margin: 0;
      padding: 20px;
    }
    h1 {
      color: #0078d4;
    }
    .tabs {
      display: flex;
      margin-bottom: 20px;
    }
    .tab {
      padding: 10px 20px;
      margin-right: 10px;
      background-color: #e1e1e1;
      cursor: pointer;
      border-radius: 4px 4px 0 0;
    }
    .tab.active {
      background-color: #ffffff;
      border-bottom: 2px solid #0078d4;
    }
    .content {
      background-color: #ffffff;
      padding: 20px;
      border-radius: 0 4px 4px 4px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .book {
      display: flex;
      align-items: center;
      margin-bottom: 5px;
    }
    .book input {
      margin-right: 10px;
    }
    .recommendation {
      margin-top: 20px;
      padding: 10px;
      background-color: #e5f1fb;
      border-left: 4px solid #0078d4;
      white-space: pre-line;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #0078d4;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .progress-container {
      margin-top: 20px;
    }
    .progress-label {
      margin-bottom: 5px;
    }
    .progress-bar-multi {
      display: flex;
      height: 20px;
      width: 100%;
      border-radius: 4px;
      overflow: hidden;
      background-color: #e1e1e1;
    }
    .segment {
      height: 100%;
    }
    .read { background-color: #4caf50; }
    .skipped { background-color: #ff9800; }
    .unread { background-color: #cccccc; }
  </style>
</head>
<body>

  <h1>ƒåten√°≈ô Zemƒõplochy</h1>

  <div class="tabs">
    <div class="tab active" onclick="showTab('chronological')">Chronologicky</div>
    <div class="tab" onclick="showTab('series')">Minis√©rie</div>
  </div>

  <div id="chronological" class="content">
    <div id="bookList"></div>
    <button onclick="evaluateProgress()">Vyhodnotit pokrok</button>

    <div class="progress-container">
      <div class="progress-label">üìö Pokrok v s√©rii:</div>
      <div class="progress-bar-multi" id="multiProgressBar"></div>
    </div>

    <div class="recommendation" id="recommendation">
      Doporuƒçen√≠: Zaƒçni ƒçten√≠m "Barva kouzel".
    </div>
  </div>

  <div id="series" class="content" style="display:none;">
    <p>Rozdƒõlen√≠ podle minis√©ri√≠ bude doplnƒõno.</p>
  </div>

  <script>
    const booksChrono = [
      "Barva kouzel", "Lehk√© fantastiƒçno", "Rovnoramenn√° magie", "Mort", "Magick√Ω prazdroj",
      "Soudn√© sestry", "Pyramidy", "Str√°≈æe! Str√°≈æe!", "Eric", "Pohybliv√© obr√°zky",
      "Sek√°ƒç", "ƒåarodƒõjky na cest√°ch", "Mal√≠ bohov√©", "Zbroj", "D√°my a p√°nov√©",
      "P√°t√Ω elefant", "Otec pras√°tek", "Hrrr na nƒõ!", "Carpe Jugulum", "Zaslan√° po≈°ta",
      "Nohy z j√≠lu", "Opravdov√° kouzla", "Zlodƒõj ƒçasu", "Posledn√≠ kontinent", "Noƒçn√≠ hl√≠dka",
      "Nadƒõlat prachy", "Nev√≠dan√≠ akademikov√©", "Zimodƒõj", "Podivn√Ω regiment", "Klub rv√°ƒç≈Ø",
      "Pohybliv√© obr√°zky II", "Nikdykde", "Mazan√© mal√© mu≈æe", "Zaslan√° po≈°ta II", "Nadƒõlat prachy II",
      "Podfuk", "Tƒõ≈æk√© melodiƒçno", "Zimodƒõj II", "Past√Ω≈ôsk√° koruna", "P√≠se≈à zlodƒõje smrti", "Zaslan√° po≈°ta III"
    ];

    function showTab(tabName) {
      document.getElementById('chronological').style.display = tabName === 'chronological' ? 'block' : 'none';
      document.getElementById('series').style.display = tabName === 'series' ? 'block' : 'none';
      const tabs = document.getElementsByClassName('tab');
      for (let i = 0; i < tabs.length; i++) {
        tabs[i].classList.remove('active');
      }
      event.target.classList.add('active');
    }

    window.onload = function () {
      const bookList = document.getElementById("bookList");
      booksChrono.forEach((book, index) => {
        const div = document.createElement("div");
        div.className = "book";
        div.innerHTML = `
          <input type="checkbox" id="book${index + 1}" onchange="evaluateProgress()">
          <label for="book${index + 1}">${index + 1}. ${book}</label>
        `;
        bookList.appendChild(div);
      });
    }

    function evaluateProgress() {
      let read = 0;
      let skipped = 0;
      let lastReadIndex = -1;

      for (let i = 0; i < booksChrono.length; i++) {
        const checkbox = document.getElementById(`book${i + 1}`);
        if (checkbox.checked) {
          read++;
          lastReadIndex = i;
        }
      }

      for (let i = 0; i < lastReadIndex; i++) {
        const checkbox = document.getElementById(`book${i + 1}`);
        if (!checkbox.checked) skipped++;
      }

      const total = booksChrono.length;
      let message = "";

      if (skipped > 0) {
        const skippedBooks = [];
        for (let i = 0; i < lastReadIndex; i++) {
          const checkbox = document.getElementById(`book${i + 1}`);
          if (!checkbox.checked) skippedBooks.push(booksChrono[i]);
        }
        message += "‚ö†Ô∏è  Pozor, p≈ôeskoƒçil/a jsi tyto knihy:\n" + skippedBooks.map(b => `‚Äì ${b}`).join("\n") + "\n\n";
      }

      if (lastReadIndex + 1 < total) {
        message += "üìñ Doporuƒçujeme p≈ôeƒç√≠st jako dal≈°√≠: " + booksChrono[lastReadIndex + 1];
      } else if (lastReadIndex === total - 1) {
        message += "‚úÖ M√°≈° p≈ôeƒçtenou celou s√©rii! Skvƒõl√©!";
      } else {
        message += "Zaƒçni ƒçten√≠m \"Barva kouzel\" üòä";
      }

      document.getElementById('recommendation').innerText = message;
      updateProgressBar(read, skipped, total, lastReadIndex);
    }

    function updateProgressBar(read, skipped, total, lastReadIndex) {
      const container = document.getElementById('multiProgressBar');
      container.innerHTML = '';

      for (let i = 0; i < total; i++) {
        const checkbox = document.getElementById(`book${i + 1}`);
        const segment = document.createElement('div');
        segment.classList.add('segment');
        segment.style.width = `${100 / total}%`;

        if (checkbox.checked) {
          segment.classList.add('read');
        } else if (i <= lastReadIndex) {
          segment.classList.add('skipped');
        } else {
          segment.classList.add('unread');
        }

        container.appendChild(segment);
      }

      const percent = Math.round((read / total) * 100);
      const label = document.querySelector('.progress-label');
      label.textContent = `üìö Pokrok v s√©rii: ${percent}%`;
    }
  </script>
</body>
</html>
